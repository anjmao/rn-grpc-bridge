// package: {{{packageName}}}
// file: {{{fileName}}}

{{#each imports}}
{{{this}}}
{{/each}}

{{#each services}}
@objc({{{serviceName}}})
class {{{serviceName}}}: NSObject, GrpcService {

{{#each methods}}

  @objc func {{{methodName}}}(_ {{{requestMapFrom}}}: [String: Any], resolve: RCTPromiseResolveBlock, reject: RCTPromiseRejectBlock) -> Void {
    let svc = {{{serviceName}}}Client()
    var {{{requestMapTo}}} = {{{requestTypeName}}}

// request mapping
{{{requestMapping}}}
// end request mapping

    do {
      let {{{responseMapFrom}}} = try svc.{{{methodName}}}({{{requestMapTo}}})
      var {{{responseMapTo}}}: [String: Any] = [:]

// response mapping
{{{responseMapping}}}
// end response mapping

      resolve({{{responseMapTo}}})
    } catch {
      reject("ERROR", error.localizedDescription, error)
    }
  }

{{/each}}
  
  @objc
  static func requiresMainQueueSetup() -> Bool {
    return false
  }
}
{{/each}}