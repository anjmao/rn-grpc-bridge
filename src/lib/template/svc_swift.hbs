// package: {{{packageName}}}
// file: {{{fileName}}}

{{#each imports}}
{{{this}}}
{{/each}}

{{#each services}}
@objc({{{serviceName}}})
class {{{serviceName}}}: NSObject, GrpcService {

{{#each methods}}

  @objc func {{{methodName}}}(_ req: [String: Any], resolve: RCTPromiseResolveBlock, reject: RCTPromiseRejectBlock) -> Void {
    let svc = {{{serviceName}}}Client()
    var root = {{{requestTypeName}}}
// ----request mapping---- 
{{{requestMapping}}}
// ----end request mapping----
    do {
      let rsp = try svc.{{{methodName}}}(r)
      var res: [String: Any] = [:]
      {{#each responseFields}}
      {{{value}}}
      {{/each}}
      resolve(res)
    } catch {
      reject("ERROR", error.localizedDescription, error)
    }
  }

{{/each}}
  
  @objc
  static func requiresMainQueueSetup() -> Bool {
    return false
  }
}
{{/each}}